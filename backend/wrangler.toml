# Top-level configuration
name = "todo-app-worker"
main = "src/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
# logpush = true

# Durable Objects configuration (temporarily disabled)
# [[durable_objects.bindings]]
# name = "TODO_WEBSOCKET"
# class_name = "TodoWebSocketDurableObject"

# Durable Objects migrations - delete existing Durable Objects
# [[migrations]]
# tag = "v2"
# deleted_classes = ["TodoWebSocketDurableObject"]

# Observability configuration for Wrangler v4
[observability]
enabled = true
# head_sampling_rate = 0.1 # 10% of requests are logged

[observability.logs]
enabled = true
# head_sampling_rate = 0.6

[env.production]
name = "prod-todo-worker"
environment = "production"

[env.staging]
name = "stg-todo-worker"
environment = "staging"

# start workers locally
[env.development]
name = "dev-todo-worker"
environment = "development"
